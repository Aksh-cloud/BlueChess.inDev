<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Blue Chess.in â€“ Admin Code</title>
<meta name="description" content="Join the Blue Chess.in online lobby to challenge friends and players around the world. Start your match instantly.">
<link rel="shortcut icon" href="files/img/-s-logo.png" type="image/png">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
<style>
  :root {
    --bg:#0b1f3a;
    --panel:#0f2b55;
    --muted:#aac7ff;
    --brand:#4aa3ff;
    --danger:#ff4d4d;
    --ok:#22c55e;
    --text:#e6f0ff;
    --shadow:rgba(74,163,255,.6);
  }
  body {
    font-family: Inter, sans-serif;
    background: linear-gradient(120deg,#02122a,#0f2b55);
    margin: 0;
    color: var(--text);
    overflow-x: hidden;
  }
  #particles-js {
    position: fixed;
    width: 100%;
    height: 100%;
    z-index: -1;
    top: 0;
    left: 0;
  }
  /* Title Bar */
.title-bar {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 15px;
  padding: 20px;
  margin: 0;
  background: linear-gradient(90deg, #003467, #0084a4, #22c55e);
  background-size: 200% 200%;
  animation: gradientShift 6s infinite alternate;
  box-shadow: 0 4px 20px rgba(0,0,0,0.4);
}

.title-bar h1 {
  margin: 0;
  font-size: 2em;
  font-weight: 700;
  color: white;
  letter-spacing: 1px;
  text-shadow: 0 0 8px rgba(255,255,255,.6);
}

.title-logo {
  height: 50px;
  width: auto;
  filter: drop-shadow(0 0 8px rgba(74,163,255,.8));
}

#goHome {
    position: absolute;
    top: 20px;
    left: 20px;
    padding: 10px 15px;
    background: var(--brand);
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    box-shadow: 0 0 12px var(--shadow);
    transition: background .2s, transform .2s;
}

  @keyframes gradientShift {
    from { background-position: 0% 50%; }
    to { background-position: 100% 50%; }
  }
  .container {
    max-width: 900px;
    margin: 30px auto;
    padding: 20px;
    align-items: center;
    text-align: center;

  }
  #secretInput {
      padding: 10px;
      font-size: 1em;
      border: none;
      border-radius: 5px;
      margin-top: 20px;
      box-shadow: 0 0 10px rgba(74,163,255,0.6);
      align-self: center;

    }
    #codebtn {
      padding: 10px 20px;
      font-size: 1em;
      color: #fff;
      background: #4aa3ff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      box-shadow: 0 0 10px rgba(74,163,255,0.6);
      transition: background 0.3s, box-shadow 0.3s;
      margin-top: 20px;
      margin-left: 10px;
    }
    
</style>
</head>
<body>

<div id="particles-js"></div>


<header class="title-bar">
    <button id="goHome" onclick="window.location.href='home.html'">Go Home</button>
  <img src="files/img/-w-logo.png" alt="BlueChess.in" class="title-logo">
  <h1> -   Admin Code</h1>
</header>


<div class="container">
  <input type="text" id="secretInput" placeholder="Enter Secret Code"><button id="codebtn">Enter</button>  
</div>

<audio id="challengeSound" src="files/sound/challenge.wav" preload="auto"></audio>
<audio id="acceptedSound" src="files/sound/accepted.wav" preload="auto"></audio>

<script>
/* Supabase setup */
const SUPABASE_URL = "https://ruevzmnbhoowmuleeqjb.supabase.co";
const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ1ZXZ6bW5iaG9vd211bGVlcWpiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQzOTUzNTIsImV4cCI6MjA2OTk3MTM1Mn0.tt_xEAqLGiv92mvqhQaEvsjTBE6cmYDC3kkQcyPqsTY";
const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

let currentUserId = null;

document.getElementById("codebtn").addEventListener("click", async () => {
  const code = document.getElementById("secretInput").value.trim();
  if (!code) {
    alert("Please enter a secret code.");
    return;
  }
    const { data, error } = await supabaseClient
        .from('secret_codes')
        .select('*')
        .eq('code1', code)
        .single();
    
    if (data) {
        alert("Code accepted! Redirecting to admin panel.");
        window.location.href = "adminpanel.html?code=" + encodeURIComponent(code);
    } else {
        alert("Invalid code. Please try again.");
    }
});

/* Particles background */
particlesJS("particles-js", {
  particles: {
    number: { value: 100, density: { enable: true, value_area: 800 } },
    color: { value: "#4aa3ff" },
    shape: { type: "circle" },
    opacity: { value: 0.5 },
    size: { value: 3 },
    line_linked: { enable: true, distance: 150, color: "#4aa3ff", opacity: 0.4, width: 1 },
    move: { enable: true, speed: 2 }
  },
  retina_detect: true
});
</script>
</body>
</html>
